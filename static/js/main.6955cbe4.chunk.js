(this["webpackJsonpbooks-client-mern"]=this["webpackJsonpbooks-client-mern"]||[]).push([[0],{50:function(e,t,a){e.exports=a(80)},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=a(8),s=a(20),i=a(4),u=function(e){var t=e.title;return r.a.createElement("div",{className:"col-6 text-center p-4"},r.a.createElement("div",{className:"jumbotron d-flex align-items-center justify-content-center",style:{height:"300px"}},r.a.createElement("h1",{className:"display-4"},t)))},m=a(7),d=a.n(m),b=a(14),p=a(15),E=a.n(p),f=Object(n.createContext)(),v=function(e){var t=e.id,a=e.title,c=e.author,l=Object(n.useContext)(f).dispatch,o=Object(i.f)(),s=function(){var e=Object(b.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),e.next=3,E.a.delete("http://localhost:4000/api/books/".concat(t));case 3:n=e.sent,r=n.data,l({type:"REMOVE_FROM_COLLECTION",payload:r.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("li",{className:"list-group-item",onClick:function(){o.push("/books/".concat(t))}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},a," - ",c),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-danger px-2 py-0",onClick:s},"X"))))},h=function(e){var t=e.books;return r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement(v,{key:e._id,id:e._id,title:e.title,author:e.author})})))},O=a(82),N=a(83),k=function(e){var t=e.show,a=e.handleClose,n=e.title,c=e.text;return r.a.createElement(O.a,{show:t,onHide:a},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,n)),r.a.createElement(O.a.Body,null,c),r.a.createElement(O.a.Footer,null,r.a.createElement(N.a,{variant:"primary",onClick:a},"Ok")))},y=function(){var e=Object(n.useContext)(f).dispatch,t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(""),v=Object(o.a)(p,2),h=v[0],O=v[1],N=Object(n.useState)(""),y=Object(o.a)(N,2),j=y[0],x=y[1],g=Object(n.useState)(!1),w=Object(o.a)(g,2),C=w[0],S=w[1],_=function(){S(!1),B()},B=function(){l(""),m(""),O(""),x("")},R=function(){var t=Object(b.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(c&&u&&h)){t.next=16;break}return t.prev=2,t.next=5,E.a.post("http://localhost:4000/api/books",{title:c,author:u,synopsis:h});case 5:n=t.sent,r=n.data,S(!0),e({type:"ADD_TO_COLLECTION",payload:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),x("Something went wrong adding your book!");case 14:t.next=17;break;case 16:x("Please enter the required information!");case 17:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:R},j&&r.a.createElement("small",{className:"form-text text-danger my-3"},j),C?r.a.createElement(k,{show:C,handleClose:_,title:"Success",text:"".concat(c," added to database!!")}):null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"title",className:"col-2 col-form-label"},"Title"),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"text",className:"form-control",id:"title",value:c,onChange:function(e){l(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"author",className:"col-2 col-form-label"},"Author"),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"text",className:"form-control",id:"author",value:u,onChange:function(e){m(e.target.value)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"synopsis",className:"col-2 col-form-label"},"Synopsis"),r.a.createElement("div",{className:"col"},r.a.createElement("textarea",{type:"text",className:"form-control",id:"synopsis",value:h,onChange:function(e){O(e.target.value)}}))),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Add Book"))},j=function(){var e=Object(n.useContext)(f),t=e.state,a=e.dispatch;return Object(n.useEffect)((function(){var e=!1;return function(){var t=Object(b.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=7;break}return t.next=4,E.a.get("http://localhost:4000/api/books");case 4:n=t.sent,r=n.data,a({type:"SET_BOOKS_SUCCESS",payload:r});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e||a({type:"SET_BOOKS_ERROR",payload:"Error getting books"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[a]),t.loading?r.a.createElement("div",null,"Loading ..."):r.a.createElement("section",null,t.error&&r.a.createElement("h3",null,t.error),r.a.createElement("div",{className:"row p-3 text-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h1",null,"Add a new Book"),r.a.createElement(y,null)),r.a.createElement("div",{className:"col-6"},r.a.createElement("h1",null,"List of books here"),r.a.createElement(h,{books:t.books}))))},x=function(){return r.a.createElement("main",null,r.a.createElement("div",{id:"headers",className:"row border mt-3"},r.a.createElement(u,{title:"What Books Should I Read?"}),r.a.createElement(u,{title:"Books On My List"})),r.a.createElement(j,null))},g=a(47),w=a.n(g),C=function(e){var t=e.show,a=e.handleClose,c=e.book,l=e.setBook,s=Object(n.useState)(c.title),i=Object(o.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(c.author),f=Object(o.a)(p,2),v=f[0],h=f[1],N=Object(n.useState)(c.synopsis),k=Object(o.a)(N,2),y=k[0],j=k[1],x=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:u,author:v,synopsis:y},e.next=4,E.a.put("http://localhost:4000/api/books/".concat(c._id),n);case 4:r=e.sent,o=r.data,a(),l(o.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.a,{show:t,onHide:a},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Edit Book")),r.a.createElement(O.a.Body,null,r.a.createElement("form",{onSubmit:x},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"title",className:"col-2 col-form-label"},"Title"),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"text",className:"form-control",id:"title",value:u,onChange:function(e){var t=e.target.value;m(t)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"author",className:"col-2 col-form-label"},"Author"),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"text",className:"form-control",id:"author",value:v,onChange:function(e){var t=e.target.value;h(t)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"synopsis",className:"col-2 col-form-label"},"Synopsis"),r.a.createElement("div",{className:"col"},r.a.createElement("textarea",{type:"text",className:"form-control",id:"synopsis",value:y,onChange:function(e){var t=e.target.value;j(t)}}))),r.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:a},"Update Book"))))},S=function(){var e=Object(i.g)().id,t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),u=Object(o.a)(s,2),m=u[0],p=u[1];Object(n.useEffect)((function(){(function(){var t=Object(b.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("".concat("http://localhost:4000/api/books","/").concat(e));case 2:a=t.sent,n=a.data,l(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);var f;return c?r.a.createElement(n.Fragment,null,r.a.createElement(C,{show:m,handleClose:function(){p(!1)},book:c,setBook:l}),r.a.createElement("div",{className:"container text-center"},r.a.createElement("h1",{className:"my-4"},c.title," details"),r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header"},c.title),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c.author),r.a.createElement("p",{className:"card-text"},c.synopsis)),r.a.createElement("div",{className:"card-footer text-muted"},(f=c.date,w()(f).format("MMMM Do YYYY")))),r.a.createElement("div",{className:"my-4"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){p(!0)}},"Edit")))):r.a.createElement("div",{className:"container text-center"},r.a.createElement("h1",null,"Book not found"))},_=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:x}),r.a.createElement(i.a,{path:"/books/:id",exact:!0,component:S}))},B=function(){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement(s.b,{className:"navbar-brand",to:"/"},"React Reading List"))},R=a(48),T=a(17),L=function(e,t){var a=t.type,n=t.payload;switch(a){case"SET_BOOKS_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{books:n,loading:!1,error:""});case"SET_BOOKS_ERROR":return Object(T.a)(Object(T.a)({},e),{},{loading:!1,error:n});case"ADD_TO_COLLECTION":return Object(T.a)(Object(T.a)({},e),{},{books:[n].concat(Object(R.a)(e.books))});case"REMOVE_FROM_COLLECTION":var r=n,c=e.books.filter((function(e){return e._id!==r._id}));return Object(T.a)(Object(T.a)({},e),{},{books:c});default:return e}},F=function(){var e=Object(n.useReducer)(L,{books:[],loading:!0,error:""}),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(f.Provider,{value:{state:a,dispatch:c}},r.a.createElement(s.a,null,r.a.createElement(B,null),r.a.createElement(_,null)))};l.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.6955cbe4.chunk.js.map